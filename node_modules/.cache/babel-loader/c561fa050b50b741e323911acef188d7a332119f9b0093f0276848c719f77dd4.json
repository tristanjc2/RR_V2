{"ast":null,"code":"import _objectSpread from\"C:/Users/trist/OneDrive/Desktop/RR_V3/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ReviewSection=_ref=>{let{reviews,isAdmin,onAdd,onDelete,productList=[]}=_ref;const[form,setForm]=useState({name:\"\",rating:5,text:\"\",productId:\"general\"});const handleChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));};const handleSubmit=e=>{e.preventDefault();onAdd(_objectSpread({},form));setForm({name:\"\",rating:5,text:\"\",productId:\"general\"});};return/*#__PURE__*/_jsxs(\"div\",{id:\"reviews\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-4\",children:\"Customer Reviews\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"mb-6 space-y-3\",children:[/*#__PURE__*/_jsxs(\"select\",{name:\"productId\",value:form.productId,onChange:handleChange,className:\"border px-3 py-2 rounded w-full\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"general\",children:\"General Company Review\"}),(()=>{const groups=[];const grouped={};productList.forEach(p=>{if(!grouped[p.category])grouped[p.category]={};if(!grouped[p.category][p.subcategory])grouped[p.category][p.subcategory]=[];grouped[p.category][p.subcategory].push(p);});Object.entries(grouped).forEach(_ref2=>{let[cat,subs]=_ref2;groups.push(/*#__PURE__*/_jsx(\"optgroup\",{label:cat,children:Object.entries(subs).flatMap(_ref3=>{let[sub,prods]=_ref3;return prods.map(prod=>/*#__PURE__*/_jsxs(\"option\",{value:prod.id,children:[sub,\": \",prod.name]},prod.id));})},cat));});return groups;})()]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:form.name,onChange:handleChange,placeholder:\"Your name\",className:\"border px-3 py-2 rounded w-full\",required:true}),/*#__PURE__*/_jsx(\"select\",{name:\"rating\",value:form.rating,onChange:handleChange,className:\"border px-3 py-2 rounded w-full\",children:[5,4,3,2,1].map(r=>/*#__PURE__*/_jsxs(\"option\",{value:r,children:[r,\" Star\",r>1?'s':'']},r))}),/*#__PURE__*/_jsx(\"textarea\",{name:\"text\",value:form.text,onChange:handleChange,placeholder:\"Write your review...\",className:\"border px-3 py-2 rounded w-full\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-green-700 text-white px-4 py-2 rounded hover:bg-green-800 transition\",children:\"Submit Review\"})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-4\",children:reviews.map((r,i)=>{var _productList$find;const productName=r.productId&&r.productId!==\"general\"?((_productList$find=productList.find(p=>String(p.id)===String(r.productId)))===null||_productList$find===void 0?void 0:_productList$find.name)||\"[Deleted Product]\":null;return/*#__PURE__*/_jsxs(\"li\",{className:\"border rounded p-4 bg-gray-50 relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold mr-2\",children:r.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-yellow-500\",children:['\\u2605'.repeat(r.rating),'\\u2606'.repeat(5-r.rating)]}),productName?/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded\",children:productName}):/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-xs bg-gray-100 text-gray-700 px-2 py-0.5 rounded\",children:\"General\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700 italic\",children:[\"\\u201C\",r.text,\"\\u201D\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-400\",children:r.date}),isAdmin&&/*#__PURE__*/_jsx(\"button\",{className:\"absolute top-2 right-2 bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700\",onClick:()=>onDelete(i),children:\"Delete\"})]},i);})})]});};export default ReviewSection;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","ReviewSection","_ref","reviews","isAdmin","onAdd","onDelete","productList","form","setForm","name","rating","text","productId","handleChange","e","_objectSpread","target","value","handleSubmit","preventDefault","id","children","className","onSubmit","onChange","groups","grouped","forEach","p","category","subcategory","push","Object","entries","_ref2","cat","subs","label","flatMap","_ref3","sub","prods","map","prod","type","placeholder","required","r","i","_productList$find","productName","find","String","repeat","date","onClick"],"sources":["C:/Users/trist/OneDrive/Desktop/RR_V3/src/components/ReviewSection.jsx"],"sourcesContent":["import React, { useState } from \"react\";\n\nconst ReviewSection = ({ reviews, isAdmin, onAdd, onDelete, productList = [] }) => {\n  const [form, setForm] = useState({ name: \"\", rating: 5, text: \"\", productId: \"general\" });\n\n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onAdd({ ...form });\n    setForm({ name: \"\", rating: 5, text: \"\", productId: \"general\" });\n  };\n\n  return (\n    <div id=\"reviews\">\n      <h3 className=\"text-2xl font-bold mb-4\">Customer Reviews</h3>\n      <form onSubmit={handleSubmit} className=\"mb-6 space-y-3\">\n        <select\n          name=\"productId\"\n          value={form.productId}\n          onChange={handleChange}\n          className=\"border px-3 py-2 rounded w-full\"\n        >\n          <option value=\"general\">General Company Review</option>\n          {/* Group products by category and subcategory */}\n          {(() => {\n  const groups = [];\n  const grouped = {};\n  productList.forEach(p => {\n    if (!grouped[p.category]) grouped[p.category] = {};\n    if (!grouped[p.category][p.subcategory]) grouped[p.category][p.subcategory] = [];\n    grouped[p.category][p.subcategory].push(p);\n  });\n  Object.entries(grouped).forEach(([cat, subs]) => {\n    groups.push(\n      <optgroup key={cat} label={cat}>\n        {Object.entries(subs).flatMap(([sub, prods]) =>\n          prods.map(prod => (\n            <option key={prod.id} value={prod.id}>{sub}: {prod.name}</option>\n          ))\n        )}\n      </optgroup>\n    );\n  });\n  return groups;\n})()}\n\n        </select>\n        <input\n          type=\"text\"\n          name=\"name\"\n          value={form.name}\n          onChange={handleChange}\n          placeholder=\"Your name\"\n          className=\"border px-3 py-2 rounded w-full\"\n          required\n        />\n        <select\n          name=\"rating\"\n          value={form.rating}\n          onChange={handleChange}\n          className=\"border px-3 py-2 rounded w-full\"\n        >\n          {[5, 4, 3, 2, 1].map((r) => (\n            <option key={r} value={r}>{r} Star{r > 1 ? 's' : ''}</option>\n          ))}\n        </select>\n        <textarea\n          name=\"text\"\n          value={form.text}\n          onChange={handleChange}\n          placeholder=\"Write your review...\"\n          className=\"border px-3 py-2 rounded w-full\"\n          required\n        />\n        <button\n          type=\"submit\"\n          className=\"bg-green-700 text-white px-4 py-2 rounded hover:bg-green-800 transition\"\n        >\n          Submit Review\n        </button>\n      </form>\n      <ul className=\"space-y-4\">\n        {reviews.map((r, i) => {\n          const productName = r.productId && r.productId !== \"general\"\n            ? (productList.find(p => String(p.id) === String(r.productId))?.name || \"[Deleted Product]\")\n            : null;\n          return (\n            <li key={i} className=\"border rounded p-4 bg-gray-50 relative\">\n              <div className=\"flex items-center mb-1\">\n                <span className=\"font-semibold mr-2\">{r.name}</span>\n                <span className=\"text-yellow-500\">{'\\u2605'.repeat(r.rating)}{'\\u2606'.repeat(5 - r.rating)}</span>\n                {productName ? (\n                  <span className=\"ml-2 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded\">{productName}</span>\n                ) : (\n                  <span className=\"ml-2 text-xs bg-gray-100 text-gray-700 px-2 py-0.5 rounded\">General</span>\n                )}\n              </div>\n              <p className=\"text-gray-700 italic\">“{r.text}”</p>\n              <span className=\"text-xs text-gray-400\">{r.date}</span>\n              {isAdmin && (\n                <button className=\"absolute top-2 right-2 bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700\" onClick={() => onDelete(i)}>Delete</button>\n              )}\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nexport default ReviewSection;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}