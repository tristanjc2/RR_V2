{"ast":null,"code":"import React,{useState}from\"react\";import{motion,AnimatePresence}from\"framer-motion\";import{getAuth,signInWithEmailAndPassword,GoogleAuthProvider,signInWithPopup}from\"firebase/auth\";// TODO: For production, load Firebase config from environment variables, not source code!\nimport{app}from\"../firebase\";import ForgotUsernameModal from\"./ForgotUsernameModal\";import CreateAccountModal from\"./CreateAccountModal\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginModal=_ref=>{let{open,onLogin,onClose}=_ref;const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const[loading,setLoading]=useState(false);const[showForgot,setShowForgot]=useState(false);const[showCreate,setShowCreate]=useState(false);const handleSubmit=async e=>{e.preventDefault();setError(\"\");setLoading(true);try{const auth=getAuth(app);await signInWithEmailAndPassword(auth,email,password);setLoading(false);const user=auth.currentUser;onLogin(\"user\",user);// Optionally, log successful login for analytics\n}catch(err){setLoading(false);// Show more descriptive error if available\nsetError(err.message||\"Invalid email or password\");// Optionally, log error for monitoring\n}};const handleGoogleLogin=async()=>{setError(\"\");setLoading(true);try{const provider=new GoogleAuthProvider();const auth=getAuth(app);await signInWithPopup(auth,provider);setLoading(false);const user=auth.currentUser;onLogin(\"user\",user);console.log(\"Google login successful\",user);}catch(err){setLoading(false);setError(\"Google login failed\");console.error(\"Google login failed\",err);}};if(!open)return null;return/*#__PURE__*/_jsx(AnimatePresence,{children:/*#__PURE__*/_jsx(motion.div,{className:\"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50\",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:/*#__PURE__*/_jsxs(motion.div,{className:\"bg-white rounded-lg p-8 max-w-sm w-full text-center relative\",initial:{scale:0.95,y:30},animate:{scale:1,y:0},exit:{scale:0.95,y:30},children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-4\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Email or admin username\",value:email,onChange:e=>setEmail(e.target.value),className:\"border px-3 py-2 rounded w-full\",autoFocus:true,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),className:\"border px-3 py-2 rounded w-full\",required:true}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-sm\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-green-700 text-white px-4 py-2 rounded hover:bg-green-800 transition w-full disabled:opacity-50\",disabled:loading,children:loading?\"Logging in...\":\"Login\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition w-full mt-2\",onClick:handleGoogleLogin,disabled:loading,children:loading?\"Please wait...\":\"Login with Google\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-2 mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"text-green-700 underline text-sm\",onClick:()=>setShowForgot(true),children:\"Forgot Username?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"text-green-700 underline text-sm\",onClick:()=>setShowCreate(true),children:\"Create Account\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"text-gray-400 text-sm underline mt-2\",onClick:onClose,children:\"Cancel\"})]})]}),/*#__PURE__*/_jsx(ForgotUsernameModal,{open:showForgot,onClose:()=>setShowForgot(false)}),/*#__PURE__*/_jsx(CreateAccountModal,{open:showCreate,onClose:()=>setShowCreate(false)})]})})});};export default LoginModal;","map":{"version":3,"names":["React","useState","motion","AnimatePresence","getAuth","signInWithEmailAndPassword","GoogleAuthProvider","signInWithPopup","app","ForgotUsernameModal","CreateAccountModal","jsx","_jsx","jsxs","_jsxs","LoginModal","_ref","open","onLogin","onClose","email","setEmail","password","setPassword","error","setError","loading","setLoading","showForgot","setShowForgot","showCreate","setShowCreate","handleSubmit","e","preventDefault","auth","user","currentUser","err","message","handleGoogleLogin","provider","console","log","children","div","className","initial","opacity","animate","exit","scale","y","onSubmit","type","placeholder","value","onChange","target","autoFocus","required","disabled","onClick"],"sources":["C:/RR_V3/src/components/LoginModal.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { getAuth, signInWithEmailAndPassword, GoogleAuthProvider, signInWithPopup } from \"firebase/auth\";\n// TODO: For production, load Firebase config from environment variables, not source code!\nimport { app } from \"../firebase\";\nimport ForgotUsernameModal from \"./ForgotUsernameModal\";\nimport CreateAccountModal from \"./CreateAccountModal\";\n\nconst LoginModal = ({ open, onLogin, onClose }) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [showForgot, setShowForgot] = useState(false);\n  const [showCreate, setShowCreate] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setLoading(true);\n    try {\n      const auth = getAuth(app);\n      await signInWithEmailAndPassword(auth, email, password);\n      setLoading(false);\n      const user = auth.currentUser;\n      onLogin(\"user\", user);\n      // Optionally, log successful login for analytics\n    } catch (err) {\n      setLoading(false);\n      // Show more descriptive error if available\n      setError(err.message || \"Invalid email or password\");\n      // Optionally, log error for monitoring\n    }\n  };\n\n  const handleGoogleLogin = async () => {\n    setError(\"\");\n    setLoading(true);\n    try {\n      const provider = new GoogleAuthProvider();\n      const auth = getAuth(app);\n      await signInWithPopup(auth, provider);\n      setLoading(false);\n      const user = auth.currentUser;\n      onLogin(\"user\", user);\n      console.log(\"Google login successful\", user);\n    } catch (err) {\n      setLoading(false);\n      setError(\"Google login failed\");\n      console.error(\"Google login failed\", err);\n    }\n  };\n\n\n  if (!open) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        className=\"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50\"\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n      >\n        <motion.div\n          className=\"bg-white rounded-lg p-8 max-w-sm w-full text-center relative\"\n          initial={{ scale: 0.95, y: 30 }}\n          animate={{ scale: 1, y: 0 }}\n          exit={{ scale: 0.95, y: 30 }}\n        >\n          <h3 className=\"text-2xl font-bold mb-4\">Login</h3>\n          <form onSubmit={handleSubmit} className=\"space-y-3\">\n            <input\n              type=\"text\"\n              placeholder=\"Email or admin username\"\n              value={email}\n              onChange={e => setEmail(e.target.value)}\n              className=\"border px-3 py-2 rounded w-full\"\n              autoFocus\n              required\n            />\n            <input\n              type=\"password\"\n              placeholder=\"Password\"\n              value={password}\n              onChange={e => setPassword(e.target.value)}\n              className=\"border px-3 py-2 rounded w-full\"\n              required\n            />\n            {error && <div className=\"text-red-500 text-sm\">{error}</div>}\n            <button\n              type=\"submit\"\n              className=\"bg-green-700 text-white px-4 py-2 rounded hover:bg-green-800 transition w-full disabled:opacity-50\"\n              disabled={loading}\n            >\n              {loading ? \"Logging in...\" : \"Login\"}\n            </button>\n            <button\n              type=\"button\"\n              className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition w-full mt-2\"\n              onClick={handleGoogleLogin}\n              disabled={loading}\n            >\n              {loading ? \"Please wait...\" : \"Login with Google\"}\n            </button>\n            <div className=\"flex flex-col gap-2 mt-4\">\n              <button\n                type=\"button\"\n                className=\"text-green-700 underline text-sm\"\n                onClick={() => setShowForgot(true)}\n              >\n                Forgot Username?\n              </button>\n              <button\n                type=\"button\"\n                className=\"text-green-700 underline text-sm\"\n                onClick={() => setShowCreate(true)}\n              >\n                Create Account\n              </button>\n              <button\n                type=\"button\"\n                className=\"text-gray-400 text-sm underline mt-2\"\n                onClick={onClose}\n              >\n                Cancel\n              </button>\n            </div>\n          </form>\n          <ForgotUsernameModal open={showForgot} onClose={() => setShowForgot(false)} />\n          <CreateAccountModal open={showCreate} onClose={() => setShowCreate(false)} />\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n};\n\nexport default LoginModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}